if (self.CavalryLogger) { CavalryLogger.start_js(["j0ovM"]); }

__d('PageTimelineViewportTracking',['csx','Banzai','DataAttributeUtils','DOM','TimelineViewportTrackingLogType','ViewportTracking','viewportTrackingBuilder','$'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;function k(n){return {getAllStories:function o(){return c('DOM').scry(c('$')('content_container'),"._5pat");},getStoryID:function o(p){var q=JSON.parse(c('DataAttributeUtils').getDataFt(p));return q&&q.top_level_post_id;},getDataToLog:function o(p){return JSON.parse(c('DataAttributeUtils').getDataFt(p))||{};},getStream:function o(){return c('$')('content_container');},getDataFromConfig:function o(p,q){q.isTimetrackingEnabled=true;}};}i=babelHelpers.inherits(l,c('ViewportTracking'));j=i&&i.prototype;l.prototype.getTimetrackingDataToLog=function(n){var o=j.getTimetrackingDataToLog.call(this,n);o.log_type=c('TimelineViewportTrackingLogType').DURATION;return o;};l.prototype.getAllStoriesFromCache=function(){return this.behavior.getAllStories();};l.prototype.sendDataToLog=function(n,o,p,q){if(!o.ft)return;var r={};if(q)r.retry=q;if(p)r.delay=2000;c('Banzai').post('page_timeline_vpv_tracking',o,r);};l.prototype.cleanup=function(){m.clearSingleton();j.cleanup.call(this);};function l(){i.apply(this,arguments);}var m=c('viewportTrackingBuilder')(function(n){var o=new l(k(n));o.init(n);return o;});m.init=m.singleton.bind(m);f.exports=m;}),null);